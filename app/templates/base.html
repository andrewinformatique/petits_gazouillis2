{% extends 'bootstrap/base.html' %}


{% block styles %}
    {{super()}}
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/styles.css') }}"> 
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='images/favicon.ico') }}">
{% endblock %}

{% block scripts %}
    {{super()}}
    <script src="//cdnjs.cloudfare.com/ajax/libs/socket.io.js"></script>
    <script>
      var socket;
      var utilisateurs_tableau = [];
      var publications_tableau = [];
    
      function initialiser_websocket(publications_dst){

        if ((typeof socket === "undefined")|| (! socket.connected)){
          socket = io.connect('http://'+ document.domain + ':' + location.port)
        }

        socket.on('nouvelle_publication', function(data){
          alert(data.id);

          infos = btoa("Ron:Password1")
          $.ajax({
            type: 'GET',
            url: "http://127.0.0.1:5000/api/jeton"
          })

        })
      }
    </script>

<!doctype html>

<html>
    <head>
      {% if title %}
      <title>{{ title }} - Petits Gazouillis par Andrew Aboujaoude</title>
      {% else %}
      <title>Petits Gazouillis ☺ par Andrew Aboujaoude</title>
      {% endif %}
    </head>
    <body>
        <div>Petits Gazouillis ☺ par Andrew Aboujaoude: 
          <a href="{{ url_for('index') }}">Accueil</a>
          {% if current_user.is_anonymous %}
          <a href="{{ url_for('etablir_session') }}">Établir une Session</a>
          {% else %}
          <a href="{{ url_for('utilisateur', nom=current_user.nom) }}">Profil</a>
          <a href="{{ url_for('explorer') }}">Explorer</a>
          <a href="{{ url_for('logout') }}">Fin de Session</a>
          {% endif %}
        </div>
        <hr>
        {% with messages = get_flashed_messages() %}
        {% if messages %}
        <ul>
            {% for message in messages %}
            <li>{{ message }}</li>
            {% endfor %}
        </ul>
        {% endif %}
        {% endwith %}
        {% block content %}{% endblock %}
    </body>
</html>